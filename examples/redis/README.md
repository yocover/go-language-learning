# Redis 介绍与实践

Redis (Remote Dictionary Server) 是一个开源的、高性能的、基于内存的键值对数据库系统。它支持多种数据结构，并提供了丰富的功能特性。

## Redis 的主要特点

1. **高性能**
   - 基于内存存储，读写速度极快
   - 单线程架构，避免了线程切换开销
   - 使用 I/O 多路复用机制处理并发连接

2. **数据结构丰富**
   - String（字符串）：最基本的数据类型，可以存储字符串、整数或浮点数
   - List（列表）：双向链表，支持从两端添加或删除元素
   - Set（集合）：无序集合，元素不重复
   - Hash（哈希表）：存储字段和值的映射关系
   - Sorted Set（有序集合）：每个元素关联一个分数，按分数排序
   - Bitmap（位图）：处理二进制位的操作
   - HyperLogLog：用于基数统计
   - Stream：用于消息队列

3. **功能特性**
   - 支持数据持久化（RDB 和 AOF）
   - 主从复制
   - 集群模式
   - 事务支持
   - Lua 脚本
   - 发布/订阅机制
   - 过期键功能

## 常见使用场景

1. **缓存**
   - 数据库查询结果缓存
   - 页面缓存
   - 会话缓存
   - API 响应缓存

2. **计数器**
   - 页面访问量统计
   - 用户点赞数
   - 商品库存计数
   - 限流器实现

3. **队列**
   - 消息队列
   - 延迟队列
   - 任务队列

4. **排行榜**
   - 游戏积分排行
   - 热门商品排名
   - 用户活跃度排名

5. **实时分析**
   - 用户在线状态
   - 实时统计
   - 实时系统监控

6. **分布式锁**
   - 资源并发访问控制
   - 分布式任务调度
   - 秒杀系统

## 性能优化建议

1. **键值设计**
   - 避免过长的键名
   - 使用合理的命名规范
   - 注意数据结构的选择

2. **内存优化**
   - 合理设置过期时间
   - 使用压缩编码
   - 及时清理无用数据

3. **命令使用**
   - 避免使用耗时命令（如 KEYS）
   - 使用批量命令（如 MGET、MSET）
   - 合理使用管道（Pipeline）

4. **连接管理**
   - 使用连接池
   - 及时释放连接
   - 合理设置超时时间

## 注意事项

1. **内存管理**
   - Redis 是内存数据库，需要合理规划内存使用
   - 设置合适的内存淘汰策略
   - 监控内存使用情况

2. **持久化配置**
   - 根据业务需求选择 RDB 或 AOF
   - 合理配置持久化频率
   - 注意备份和恢复机制

3. **安全性**
   - 设置访问密码
   - 禁用危险命令
   - 配置网络访问限制

4. **高可用性**
   - 配置主从复制
   - 使用哨兵机制
   - 实施集群部署

## 常用命令示例

```bash
# 字符串操作
SET key value
GET key
DEL key

# 哈希表操作
HSET hash field value
HGET hash field
HGETALL hash

# 列表操作
LPUSH list value
RPUSH list value
LRANGE list 0 -1

# 集合操作
SADD set member
SMEMBERS set
SISMEMBER set member

# 有序集合操作
ZADD zset score member
ZRANGE zset 0 -1
ZRANK zset member

# 过期时间
EXPIRE key seconds
TTL key

# 事务操作
MULTI
SET key1 value1
SET key2 value2
EXEC
``` 